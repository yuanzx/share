<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <style type="text/css">
    body,
    html,
    #map {
        width: 100%;
        height: 100%;
        overflow: hidden;
        margin: 0;
    }
    </style>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=3.0&ak=A607d61b18d43a1ff27abf4ac67da83c"></script>
    <script type="text/javascript" src="http://developer.baidu.com/map/jsdemo/demo/convertor.js"></script>
    <title>浏览器定位</title>
</head>

<body>
    <div id="map"></div>
    <script>
    navigator.geolocation.getCurrentPosition(translatePoint, function() {}, {
        enableHighAccuracy: true
    }); //定位 


    function translatePoint(position) {
        var currentLat = position.coords.latitude;
        var currentLon = position.coords.longitude;
        console.log(currentLat);
        console.log(currentLon);
        var gpsPoint = new BMap.Point(currentLon, currentLat);
        BMap.Convertor.translate(gpsPoint, 0, initMap); //转换坐标 
    }

    function initMap(point) {
        //初始化地图 
        map = new BMap.Map("map");
        map.addControl(new BMap.NavigationControl());
        map.addControl(new BMap.ScaleControl());
        map.addControl(new BMap.OverviewMapControl());
        map.centerAndZoom(point, 18);
        map.addOverlay(new BMap.Marker(point))
    }
    </script>
</body>

</html>
